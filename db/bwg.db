# BWG : BRAM Waveform Generator

# ao420fmc.db - DC set, gains, AWG gain and offset.
record(ao, "${UUT}:BWG:${BANK}:NCO:FREQ") {
	field(DTYP, "stream")
	field(OUT, "@bwg.proto setNCO(${bank}) ${SPORT}")	
	field(DESC, "Set NCO ${BANK} Frequency")
	field(DRVL, "0.01")
	field(DRVH, "20000000")
	field(LINR, "LINEAR")
# N = 20e6/2**32 *F      
	field(ASLO, "4.656612873077393e-3")
	field(HOPR, "50000")
	field(LOPR, "100")
	field(EGU,  "Hz")
}

record(ao, "${UUT}:BWG:${BANK}:SAMPLES") {
	field(DTYP, "stream")
	field(OUT, "@bwg.proto setLEN(${bank}) ${SPORT}")
	field(DESC, "Set BWG ${BANK} actual length")
	field(DRVL, "1")
	field(DRVH, "4096")
	field(LINR, "NO_CONVERSION")
# actual value to write: N-1
	field(AOFF, "1")
	field(ASLO, "1")	
	field(HOPR, "50000")
	field(LOPR, "100")
}

record(bo, "${UUT}:BWG:${BANK}:EN"){
	field(DTYP, "stream")
	field(OUT, "@bwg.proto setENABLE(${bank}) ${SPORT}")	
}

record(mbbo, "${UUT}:BWG:${BANK}:SWEEP:MODE"){
	field(DTYP, "Soft Channel")
	field(NOBT, "2")
	field(ZRST, "OFF")
	field(ONST, "SAW")
	field(TWST, "RAMP")	
}

record(bo, "${UUT}:BWG:${BANK}:SWEEP:STEPMODE"){
	field(DTYP, "Soft Channel")
	field(DESC, "linear or log steps")
	field(ZNAM, "LIN")
	field(ONAM, "LOG")
}

record(ao, "${UUT}:BWG:${BANK}:SWEEP:F1"){
	field(DTYP, "Soft Channel")
	field(DESC, "Sweep START Frequency")
	field(DRVL, "0.01")
	field(DRVH, "20000000")
	field(HOPR, "50000")
	field(LOPR, "100")
	field(EGU,  "Hz")	
}

record(ao, "${UUT}:BWG:${BANK}:SWEEP:F2"){
	field(DTYP, "Soft Channel")
	field(DESC, "Sweep STOP Frequency")
	field(DRVL, "0.01")
	field(DRVH, "20000000")
	field(HOPR, "50000")
	field(LOPR, "100")
	field(EGU,  "Hz")	
}

record(ao, "${UUT}:BWG:${BANK}:SWEEP:PERIOD"){
	field(DTYP, "Soft Channel")
	field(DESC, "Sweep PERIOD")
	field(DRVL, "0.01")
	field(DRVH, "100")
	field(HOPR, "100")
	field(LOPR, "0.02")
	field(EGU,  "s")		
}

record(ao, "${UUT}:BWG:${BANK}:SWEEP:DT"){
	field(DTYP, "Soft Channel")
	field(DESC, "Sweep DWELL time")
	field(DRVL, "0.001")
	field(DRVH, "100")	
}
