# dio482_scaler.db

record(longout, "${UUT}:${SITE}:DWELL"){
    field(DESC, "SCALER DWELL count")
    field(DTYP, "Soft Channel")    
    field(DRVL, "10")
    field(DRVH, "65535")
    field(FLNK, "${UUT}:${SITE}:DWELL:w PP")
}

record(longout, "${UUT}:${SITE}:DWELL:w"){
    field(DESC, "SCALER DWELL count")
    field(DTYP, "stream")
    field(OUT,  "@dio482_scaler.proto set_dwell ${SPORT}")
    field(OMSL, "closed_loop")
    field(DOL,  "${UUT}:${SITE}:DWELL")
    field(DISV, "1")	
    field(SDIS, "${UUT}:${SITE}:DWELL:r.PACT")    
    field(DRVL, "10")
    field(DRVH, "65535") 
}

record(longin, "${UUT}:${SITE}:DWELL:r"){
    field(DESC, "SCALER DWELL count")
    field(DTYP, "stream")
    field(INP,  "@dio482_scaler.proto get_dwell ${SPORT}")
    field(SCAN, "2 second")
    field(FLNK, "${UUT}:${SITE}:DWELL:s")  
}

record(longout, "${UUT}:${SITE}:DWELL:s"){
    field(DESC, "SCALER DWELL count")
    field(DTYP, "Soft Channel")
    field(OMSL, "closed_loop")
    field(DOL,  "${UUT}:${SITE}:DWELL:r NPP")
    field(OUT,  "${UUT}:${SITE}:DWELL PP")
}

record(ao, "${UUT}:${SITE}:DWELL:TIME") {
    field(DESC, "DWELL Time in s")
    field(DTYP, "Soft Channel")	
    field(EGU,  "s")
    field(FLNK, "${UUT}:${SITE}:DWELL:TIME:c PP")
}

record(calcout, "${UUT}:${SITE}:DWELL:TIME:c") {    
    field(INPA, "${UUT}:${SITE}:DWELL:TIME")
    field(INPB, "200e-9")
    field(CALC, "A/B")
    field(DOPT, "Use CALC")
    field(OOPT, "On Change")
    field(OUT,  "${UUT}:${SITE}:DWELL PP")
}

record(bo, "${UUT}:${SITE}:ACC"){
    field(DESC, "SCALER ACCumulate NOT reset count")
    field(DTYP, "Soft Channel")
    field(ZNAM, "RESET")
    field(ONAM, "ACCUMULATE")
    field(FLNK, "${UUT}:${SITE}:ACC:w PP")
}

record(bo, "${UUT}:${SITE}:ACC:w"){
    field(DESC, "SCALER ACC count")
    field(DTYP, "stream")
    field(OUT,  "@dio482_scaler.proto set_acc ${SPORT}")
    field(OMSL, "closed_loop")
    field(DOL,  "${UUT}:${SITE}:ACC")
    field(DISV, "1")
    field(SDIS, "${UUT}:${SITE}:ACC:r.PACT")
    field(ZNAM, "RESET")
    field(ONAM, "ACCUMULATE")
}

record(bi, "${UUT}:${SITE}:ACC:r"){
    field(DESC, "SCALER ACC count")
    field(DTYP, "stream")
    field(INP,  "@dio482_scaler.proto get_acc ${SPORT}")
    field(SCAN, "2 second")
    field(FLNK, "${UUT}:${SITE}:ACC:s")
    field(ZNAM, "RESET")
    field(ONAM, "ACCUMULATE")
}

record(bo, "${UUT}:${SITE}:ACC:s"){
    field(DESC, "SCALER ACC count")
    field(DTYP, "Soft Channel")
    field(OMSL, "closed_loop")
    field(DOL,  "${UUT}:${SITE}:ACC:r NPP")
    field(OUT,  "${UUT}:${SITE}:ACC PP")
}