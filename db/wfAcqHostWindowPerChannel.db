
# raw_to_volts WINDOW stats support

record(longout, "${UUT}:${SITE}:AI:${WF}:WIN:L") {
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan1")
}
record(longout, "${UUT}:${SITE}:AI:${WF}:WIN:R") {
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan1")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan1") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:L")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan2")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan2") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:L")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan3")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan3") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:L")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan4")
}
record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:L:fan4") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:L")
	field(OMSL, "closed_loop")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan1") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:R")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan2")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan2") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:R")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan3")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan3") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:R")
	field(OMSL, "closed_loop")
	field(FLNK, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan4")
}
record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:R:fan4") {
	field(DOL,  "${UUT}:${SITE}:AI:${WF}:WIN:R")
	field(OMSL, "closed_loop")
}

record(longout, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:L") {
	field(DTYP, "Soft Channel")
	field(DESC, "Stats window 1")
	field(DRVL, "0")
	field(DRVH, "${size}")
	field(VAL,  "0")
}
record(longout, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:R") {
	field(DTYP, "Soft Channel")
	field(DESC, "Stats window 2")
	field(DRVL, "0")
	field(DRVH, "${size}")	
	field(VAL,  "0")
}

record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:L:${fan}") {
	field(${outx}, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:L PP")
}
record(dfanout, "${UUT}:${SITE}:AI:${WF}:WIN:R:${fan}") {
	field(${outx}, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:R PP")
}


# INPA : raw waveform
# INPB : maxcode bits
# INPC : vmax		: ALT: INPC=aslo, INPB=1
# INPD : alarm threshold
# INPO : aoff


record(aSub, "${UUT}:${SITE}:AI:${WF}:${cid}:V") {
	field(FTL,  "LONG")
	field(NOL,  "1")
	field(INPL, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:L")

	field(FTM,  "LONG")
	field(NOM,  "1")
	field(INPM, "${UUT}:${SITE}:AI:${WF}:${cid}:WIN:R")
}



