record(longout, "${UUT}:0:SIG:CLK_MB:SET") {
	field(DTYP, "Soft Channel")
	field(DESC, "MB CLK setpoint")
	field(EGU,  "Hz")
	field(LOPR, "${MB_SET_MIN}")
	field(HOPR, "100000000")	
	field(FLNK, "${UUT}:0:SIG:CLK_MB:set_kHz")
}

record(calc, "${UUT}:0:SIG:CLK_MB:set_kHz") {
	field(INPA,  "${UUT}:0:SIG:CLK_MB:SET")
	field(CALC, "A/1000")
	field(DESC, "MB CLK setpoint")
	field(EGU,  "kHz")
	field(FLNK, "${UUT}:0:SIG:CLK_MB:w")
}

record(longout, "${UUT}:0:SIG:CLK_MB:FIN") {
	field(DTYP, "Soft Channel")
	field(DESC, "best input frequency for MB_CLK if set")
	field(LOPR, "1000000")
	field(HOPR, "40000000")	
}
record(calcout, "${UUT}:0:SIG:CLK_MB:w") {
	field(INPA, "${UUT}:0:SIG:CLK_MB:set_kHz")
	field(INPB, "${UUT}:0:SIG:CLK_EXT:FREQ")
	field(INPC, "${UUT}:0:SIG:CLK_MB:FIN")
	field(CALC, "(C>=1000000? C: B)/1000")
	field(DTYP, "stream")
	field(OUT,  "@mb.proto setMB() ${SPORT}")
}

record(bi, "${UUT}:0:SIG:CLK_MB:READY") {
	field(DTYP, "Soft Channel")
	field(VAL,  "0")
	field(PINI, "YES")
	field(ONAM, "1")
	field(ZNAM, "0")
}

