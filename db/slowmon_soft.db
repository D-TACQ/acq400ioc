# SLOWMON : slow rate monitoring


record(bo, "${UUT}:NACC:DNA") {
	field(DTYP, "Soft Channel")
	field(DESC,  "Direct not Accumulate")	
	field(ZNAM, "ACC")
	field(ONAM, "DIR")
	field(VAL,  "1")
	field(PINI, "YES")	
}

record(bi, "${UUT}:NACC:HW") {
	field(DTYP, "Soft Channel")
	field(DESC,  "Direct not Accumulate")	
	field(ZNAM, "FALSE")
	field(ONAM, "TRUE")
	field(VAL,  "0")
	field(PINI, "YES")	
}

record(longout, "${UUT}:0:SLOWMON:FS") {
	field(DTYP, "stream")
	field(DESC, "SLOWMON output sample rate")
	field(OUT,  "@slowmon.proto setSlowmonFs S0")
	field(DRVL, "1")
	field(DRVH, "100")
	field(EGU,  "Hz")
}
	
record(longout, "${UUT}:0:SLOWMON:FIN") {
	field(DTYP, "stream")
	field(DESC, "SLOWMON input sample rate from HW")
	field(OUT,  "@slowmon.proto setSlowmonFin S0")
	field(DRVL, "1")
	field(DRVH, "${FIN_MAX}")
	field(EGU,  "Hz")
	field(FLNK, "${UUT}:0:SLOWMON:NACC")
}

record(longin, "${UUT}:0:SLOWMON:FIN:ACT") {
	field(DTYP, "Soft Channel")	
	field(DESC, "SLOWMON FIN actual")
	field(INP,  "${UUT}:0:STAT:AXI64:W:FREQ")
	field(EGU,  "Hz")
}
record(calc, "${UUT}:0:STAT:AXI64:W:FREQ") {
	field(FLNK, "${UUT}:0:SLOWMON:FIN:ACT")
}


record(longout, "${UUT}:0:SLOWMON:NACC") {
	field(DTYP, "stream")
	field(DESC, "Software Accumulate")
	field(OUT,  "@slowmon.proto setSlowmonNacc S0")
	field(DRVL, "1")
	field(DRVH, "100")
	field(EGU,  "Samples")	
}
	
record(longout, "${UUT}:0:NACC:NACC") {
	field(DTYP, "Soft Channel")
	field(DESC, "Slowmon output nsamples")
	field(DRVL, "1")
	field(DRVH, "256")
	field(VAL,  "1")
	field(PINI, "YES")
}

record(longout, "${UUT}:0:NACC:START") {
	field(DTYP, "Soft Channel")
	field(DESC, "NACC filter Start for non**2")
	field(DRVL, "0")
	field(DRVH, "255")
}

record(longout, "${UUT}:0:NACC:SHR") {
	field(DTYP, "Soft Channel")
	field(DESC, "NACC scaling >> N")
	field(DRVL, "0")
	field(DRVH, "16")
}
	
record(longout, "${UUT}:0:NACC:PRES") {
	field(DTYP, "Soft Channel")
	field(DESC, "NACC filter PREScale value **2")
	field(VAL,  "1")
	field(PINI, "YES")
	field(DRVL, "1")
	field(DRVH, "${PRESMAX}")
}

#record(calcout, "${UUT}:NACC:c") {
#	field(DTYP, "stream")
#	field(INPA, "${UUT}:0:NACC:NACC")
#	field(INPB, "${UUT}:0:NACC:SHR")
#	field(INPC, "${UUT}:0:NACC:START")	
#	field(INPD, "${UUT}:0:NACC:PRES")
#	field(OUT,  "@slowmon.proto setNACC ${SPORT}")
#}
