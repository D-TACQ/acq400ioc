record(bo, "${UUT}:MODE:CONTINUOUS") {
	field(DTYP, "stream")
	field(DESC, "continuous stream start/stop")
	field(ZNAM, "stop")
	field(ONAM, "start")
	field(OUT,  "@mb.proto setContinuous ${SPORT}")
}

record(stringin, "${UUT}:MODE:CONTINUOUS:STATUS") {
	field(DTYP, "stream")
	field(INP,  "@continuous.proto getContinuousStatus ${NPORT}")
	field(SCAN, "I/O Intr")
	field(SDIS, "${UUT}:MODE:CONTINUOUS")
	field(DISV, "0")
}
record(longout, "${UUT}:MODE:TRANSIENT") {
	field(DTYP, "stream")	
	field(DESC, "set transient samples")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "1")	
	field(OUT,  "@mb.proto setTransient(${UUT}:MODE:TRANSIENT) ${SPORT}")
}

record(longout, "${UUT}:MODE:TRANSIENT:PRE") {
	field(DTYP, "Soft Channel")
	field(DESC, "set transient pre-samples")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "100000000")
}

record(longout, "${UUT}:MODE:TRANSIENT:POST") {
	field(DTYP, "Soft Channel")
	field(DESC, "set transient post-samples")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "100000000")
}

record(longout, "${UUT}:MODE:TRANSIENT:OSAM") {
	field(DTYP, "Soft Channel")
	field(DESC, "subrate oversample ratio")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "256")
}

record(longout, "${UUT}:MODE:TRANSIENT:SOFT_TRIGGER") {
	field(DTYP, "Soft Channel")
	field(DESC, "set transient pre-samples")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "1")
}

record(longout, "${UUT}:MODE:TRANSIENT:SET_ARM") {
	field(DTYP, "stream")	
	field(DESC, "start transient capture")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "1")	
	field(OUT,  "@mb.proto setArm ${SPORT}")
	field(SDIS, "${UUT}:MODE:CONTINUOUS")
	field(DISV, "1")
}

record(longout, "${UUT}:MODE:TRANSIENT:SET_ABORT") {
	field(DTYP, "stream")	
	field(DESC, "abort transient capture")
	field(EGU,  "Samples")
	field(LOPR, "0")
	field(HOPR, "1")	
	field(OUT,  "@mb.proto setAbort ${SPORT}")
}

record(mbbi, "${UUT}:MODE:TRANS_ACT:STATE") {
	field(DTYP, "stream")
	field(DESC, "transient actual state")
	field(NOBT, "3")
	field(ZRST, "IDLE")
	field(ONST, "ARM")
	field(TWST, "RUN_PRE")
	field(THST, "RUN_POST")
	field(FRST, "POST_PROCESS")
	field(INP,  "@transient.proto read_state ${SPORTT}")
	field(SCAN, "I/O Intr")		
	field(FLNK, "${UUT}:MODE:TRANS_ACT:STATE_NOT_IDLE")
}

record(calc, "${UUT}:MODE:TRANS_ACT:STATE_NOT_IDLE") {
	field(INPA, "${UUT}:MODE:TRANS_ACT:STATE")
	field(CALC, "A == 0? 0: 1")
	field(FLNK, "${UUT}:MODE:TRANS_ACT:STATE_NOT_IDLEf")
}
record(fanout, "${UUT}:MODE:TRANS_ACT:STATE_NOT_IDLEf") {
	field(SELM, "All")
	field(LNK1, "${UUT}:1:AI:WF:TB")
	field(LNK2, "${UUT}:1:AI:TW:TB")		
}



record(longin, "${UUT}:MODE:TRANS_ACT:PRE") {	
	field(DTYP, "stream")
	field(INP,  "@transient.proto read_pre ${SPORTT}")
	field(SCAN, "I/O Intr")	
}

record(longin, "${UUT}:MODE:TRANS_ACT:POST") {
	field(DTYP, "stream")
	field(INP,  "@transient.proto read_post ${SPORTT}")
	field(SCAN, "I/O Intr")
}

record(longin, "${UUT}:MODE:TRANS_ACT:TOTSAM") {	
	field(DTYP, "stream")
	field(INP,  "@transient.proto read_elapsed ${SPORTT}")
	field(SCAN, "I/O Intr")	
}

record (longin, "${UUT}:SHOT_COMPLETE") {
	field(DTYP, "longinAcqHost")
	field(INP, "@/etc/acq400/0/shot_complete")
	field(SCAN, "1 second")
	field(PINI, "YES")		
}

record(longout, "${UUT}:MODE:TRANSIENT:REPEAT") {
	field(DTYP, "Soft Channel")
	field(DESC, "auto repeat N, decr to zero -1=forever")
	field(HOPR, "99999")
	field(LOPR, "-1")
}

record(longout, "${UUT}:MODE:TRANSIENT:DELAYMS") {
	field(DTYP, "Soft Channel")
	field(DESC, "delay before auto restart")
	field(VAL,  "1000")
}

record(longin, "${UUT}:TRANSIENT:ACT:DEMUX") {
	field(DTYP, "stream")
	field(INP,  "@transient.proto read_demux ${SPORTT}")
	field(SCAN, "I/O Intr")
}
record(stringin, "${UUT}:TRANSIENT:ACT:ERROR") {
	field(DTYP, "stream")
	field(INP,  "@transient.proto read_error ${SPORTT}")
	field(SCAN, "I/O Intr")
}

record(longout, "${UUT}:LIVE:LEN" ){
	field(DTYP, "Soft Channel")
	field(VAL,  "4096")
	field(DESC,  "length of live plot WF (fixed)")
	field(PINI,  "YES")
}
record(longout, "${UUT}:LIVE:PRE") {
	field(DTYP, "stream")
	field(SCAN, "Passive")
	field(DESC, "delay samples")
	field(FLNK, "${UUT}:LIVE:delay_calc")
	field(OUT,  "@mb.proto setPre ${SPORT}")
	field(PINI,  "YES")
}

record(calcout, "${UUT}:LIVE:delay_calc") {
	field(INPA,  "${UUT}:LIVE:LEN")
	field(INPB,  "${UUT}:LIVE:PRE")
	field(CALC,  "A-B")
	field(FLNK,  "${UUT}:LIVE:POST")
}
record(longout, "${UUT}:LIVE:POST") {
	field(DTYP,  "stream")
	field(DOL,   "${UUT}:LIVE:delay_calc")
	field(OMSL,  "closed_loop")
	field(OUT,   "@mb.proto setPost ${SPORT}")
	field(PINI,  "YES")
	field(FLNK,   "${UUT}:1:AI:WF:TB")
	# @@todo other sites are out in the cold
}



