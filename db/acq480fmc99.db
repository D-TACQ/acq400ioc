
# force rapid Hz and count reset on change of source.
record(calcout, "${UUT}:${SITE}:SIG:clk_count:nzcount") {
	field(INPJ, "${UUT}:${SITE}:SIG:clk_counter_src")
}
record(calc, "${UUT}:${SITE}:SIG:clk_count:COUNT") {
	field(INPJ, "${UUT}:${SITE}:SIG:clk_counter_src")
}
record(calc, "${UUT}:${SITE}:SIG:sample_count:COUNT") {
	field(INPJ, "${UUT}:${SITE}:SHOT")
}
record(mbbo, "${UUT}:${SITE}:SIG:clk_counter_src") {
	field(FLNK, "${UUT}:${SITE}:SIG:clk_count:nzcount")
	field(VAL,  "${SITEP1}")
	field(PINI, "YES")
}

record(calc, "${UUT}:${SITE}:ACQ480:FIR:DECIM") {
	field(INPA, "${UUT}:${SITE}:ACQ480:FIR:01")
#                    12345678901234567890123456789012345678901234567890123456789012345678901234567890	
	field(CALC, "A==0||A==10? 1: A==1||A==2||A==7? 2: A==9? 8: 4")
	alias("${UUT}:${SITE}:CLKDIV")	
}

record(mbbo, "${UUT}:${SITE}:ACQ480:FIR:01") {
	field(FLNK, "${UUT}:${SITE}:ACQ480:FIR:01:fanout")
}

record(calc, "${UUT}:0:SIG:CLK_S${SITE}:COUNT") {
	# C is scale
	field(INPC, "${div}")
	field(DESC, "64 bit count scaled by 2 for ACQ480")
}
