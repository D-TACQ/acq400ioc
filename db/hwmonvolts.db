record(ai, "${UUT}:vccaux") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/Z/vccaux")
        field(SCAN, "10 second")
        field(DESC, "ZYNQ Rails")
        field(ASLO, "0.001")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
}

record(ai, "${UUT}:vccbram") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/Z/vccbram")
        field(SCAN, "10 second")
        field(DESC, "ZYNQ Rails")
        field(ASLO, "0.001")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
}


record(ai, "${UUT}:vccint") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/Z/vccint")
        field(SCAN, "10 second")
        field(DESC, "ZYNQ Rails")
        field(ASLO, "0.001")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
}

# set up as a chain triggered on 10s scan .. avoids parallel access ?
# but also ensures that VAN processes last with valid data

record(ai, "${UUT}:5VP") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/0/5V_P")
        field(SCAN, "10 second")
        field(DESC, "ZYNQ Rails")
# 3/1000        
        field(ASLO, "0.003")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
        field(FLNK,  "${UUT}:VADJ")
}

record(ai, "${UUT}:VADJ") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/0/VADJ")        
        field(DESC, "ZYNQ Rails")
# 3/1000        
        field(ASLO, "0.003")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
        field(FLNK,  "${UUT}:VAP")
}


record(ai, "${UUT}:VAP") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/0/15VA_P")        
        field(DESC, "ZYNQ Rails")
# 11/1000        
        field(ASLO, "0.011")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
        field(FLNK,  "${UUT}:_van")
}

record(ai, "${UUT}:_van") {
        field(DTYP, "dsSysfsAi")
        field(INP, "@/dev/hwmon/0/15VA_N")        
        field(DESC, "raw result")
# scale only
        field(ASLO, ".001")
        field(LINR, "LINEAR")
        field(EGU,  "V")
        field(PINI, "YES")
        field(FLNK,  "${UUT}:VAN")
}

record(calc, "${UUT}:VAN") {
	field(INPA, "${UUT}:VAP")
	field(INPB, "${UUT}:_van")
	field(CALC, "-(1.3*A - 2.3*B)")
	field(PREC, "1")	
	field(DESC, "ZYNQ Rails")
}
