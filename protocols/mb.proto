Terminator = LF;
ExtraInput = Ignore;

setMB {
# fin kHz, fout (setpoint)
	out "mb_clk %d %(A)d";
}

setSPAD {
# EN,LEN,DI4/32
	out "spad %i,%(\$1)i,%(\$2)i";
}

getSPAD {
# EN,LEN,DI4/32
	out "spad";
	in "%d,%(\$1)d,%(\$2)d";
}

# Qstats=BS_EMPTY, BS_FILLING, BS_FULL, BS_FULL_APP, DROPS
# in "%*d,%*d,%*d,%*d,%*d";
getQstatsEmpty {
	out "Qstats";
	in "%d,%(\$1:FILLING)d,%(\$1:FULL)d,%(\$1:FULL_APP)d,%(\$1:DROPS)d";
}

getQstatsFilling {
	in "%*d,%d,%*d,%*d,%*d";
}

getQstatsFull {
	in "%*d,%*d,%d,%*d,%*d";
}

getQstatsFullApp {
	in "%*d,%*d,%*d,%d,%*d";
}

getQstatsDrops {
	in "%*d,%*d,%*d,%*d,%d";
}

# transient
# transient PRE=1000 POST=1000 OSAM=1 SOFT_TRIGGER=1

setTransient {
	out "transient PRE=%(\$1:PRE)d POST=%(\$1:POST)d OSAM=%(\$1:OSAM)d SOFT_TRIGGER=%(\$1:SOFT_TRIGGER)d";
}

setArm {
	out "set_arm";
}